# ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨ˆç®—æ©Ÿèƒ½ å®Ÿè£…å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ

**æ—¥ä»˜**: 2026-01-12
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 3 - ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨ˆç®—ï¼‰
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… å®Œäº†

---

## æ¦‚è¦

Phase 3ã®ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè£…ã®ç¬¬äºŒæ­©ã¨ã—ã¦ã€ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ï¼ˆMAã€RSIã€MACDï¼‰ã®è¨ˆç®—æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚GMOã‚³ã‚¤ãƒ³ã‹ã‚‰å–å¾—ã—ãŸãƒ­ãƒ¼ã‚½ã‚¯è¶³ãƒ‡ãƒ¼ã‚¿ã‚’åŸºã«ã€ãƒˆãƒ¬ãƒ³ãƒ‰ã¨ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ ã‚’åˆ¤å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

---

## å®Ÿæ–½å†…å®¹

### 1. TechnicalAnalyzer ã‚¯ãƒ©ã‚¹å®Ÿè£…

ä½œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«:
- [backend/src/services/technical_analyzer.py](../../backend/src/services/technical_analyzer.py)

#### å®Ÿè£…ã—ãŸæ©Ÿèƒ½

**ãƒ¡ã‚¤ãƒ³ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
class TechnicalAnalyzer:
    def get_indicators(symbol, interval, days, price_type)
    def get_multiple_indicators(symbols, interval, days)
```

**å†…éƒ¨è¨ˆç®—ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
def _calculate_ma(df)        # ç§»å‹•å¹³å‡
def _calculate_rsi(df)       # RSI
def _calculate_macd(df)      # MACD
def _determine_trend(ma)     # ãƒˆãƒ¬ãƒ³ãƒ‰åˆ¤å®š
def _determine_momentum(rsi, macd)  # ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ åˆ¤å®š
```

---

### 2. å®Ÿè£…ã—ãŸãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™

#### MAï¼ˆç§»å‹•å¹³å‡ï¼‰

**è¨ˆç®—:**
- SMA20ï¼ˆ20æœŸé–“å˜ç´”ç§»å‹•å¹³å‡ï¼‰
- SMA50ï¼ˆ50æœŸé–“å˜ç´”ç§»å‹•å¹³å‡ï¼‰

**åˆ¤å®š:**
- MA20 > MA50 â†’ ä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰
- MA20 < MA50 â†’ ä¸‹é™ãƒˆãƒ¬ãƒ³ãƒ‰

**å®Ÿè£…æ–¹æ³•:**
```python
ma20 = df["close"].rolling(window=20).mean()
ma50 = df["close"].rolling(window=50).mean()
```

#### RSIï¼ˆç›¸å¯¾åŠ›æŒ‡æ•°ï¼‰

**è¨ˆç®—:**
- RSI(14)ï¼ˆ14æœŸé–“ï¼‰

**åˆ¤å®š:**
- RSI â‰¥ 70 â†’ è²·ã‚ã‚Œã™ãŽï¼ˆå£²ã‚Šã‚·ã‚°ãƒŠãƒ«ï¼‰
- RSI â‰¤ 30 â†’ å£²ã‚‰ã‚Œã™ãŽï¼ˆè²·ã„ã‚·ã‚°ãƒŠãƒ«ï¼‰
- 30 < RSI < 70 â†’ ä¸­ç«‹

**å®Ÿè£…æ–¹æ³•:**
```python
delta = df["close"].diff()
gain = delta.where(delta > 0, 0)
loss = -delta.where(delta < 0, 0)
avg_gain = gain.rolling(window=14).mean()
avg_loss = loss.rolling(window=14).mean()
rs = avg_gain / avg_loss
rsi = 100 - (100 / (1 + rs))
```

#### MACDï¼ˆç§»å‹•å¹³å‡åŽæŸæ‹¡æ•£æ³•ï¼‰

**è¨ˆç®—:**
- MACDç·šï¼ˆEMA12 - EMA26ï¼‰
- ã‚·ã‚°ãƒŠãƒ«ç·šï¼ˆMACDç·šã®EMA9ï¼‰
- ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ï¼ˆMACDç·š - ã‚·ã‚°ãƒŠãƒ«ç·šï¼‰

**åˆ¤å®š:**
- ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ  < 0 â†’ > 0 : å¼·æ°—ã‚¯ãƒ­ã‚¹ã‚ªãƒ¼ãƒãƒ¼ï¼ˆè²·ã„ã‚·ã‚°ãƒŠãƒ«ï¼‰
- ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ  > 0 â†’ < 0 : å¼±æ°—ã‚¯ãƒ­ã‚¹ã‚ªãƒ¼ãƒãƒ¼ï¼ˆå£²ã‚Šã‚·ã‚°ãƒŠãƒ«ï¼‰

**å®Ÿè£…æ–¹æ³•:**
```python
ema_fast = df["close"].ewm(span=12, adjust=False).mean()
ema_slow = df["close"].ewm(span=26, adjust=False).mean()
macd_line = ema_fast - ema_slow
signal_line = macd_line.ewm(span=9, adjust=False).mean()
histogram = macd_line - signal_line
```

---

### 3. pandas-ta ã®ä»£æ›¿å®Ÿè£…

**èª²é¡Œ:**
- pandas-taã¯Python 3.12ä»¥ä¸Šã‚’è¦æ±‚
- ç¾åœ¨ã®ç’°å¢ƒã¯Python 3.10

**è§£æ±ºç­–:**
- pandas + numpyã‚’ä½¿ç”¨ã—ãŸè‡ªå‰å®Ÿè£…
- æ¨™æº–çš„ãªãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ã®è¨ˆç®—å¼ã‚’ä½¿ç”¨

**ãƒ¡ãƒªãƒƒãƒˆ:**
- ä¾å­˜é–¢ä¿‚ã®å‰Šæ¸›
- è»½é‡
- ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºè‡ªç”±

---

### 4. ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ

ä½œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«:
- [backend/examples/test_technical_analyzer.py](../../backend/examples/test_technical_analyzer.py)

#### ãƒ†ã‚¹ãƒˆå†…å®¹

**TEST 1: å˜ä¸€é€šè²¨ãƒšã‚¢ã®ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™**
- USD/JPYã®ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ã‚’è¨ˆç®—
- MAã€RSIã€MACDã®å€¤ã‚’è¡¨ç¤º
- ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ»ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ åˆ¤å®š

**TEST 2: è¤‡æ•°é€šè²¨ãƒšã‚¢**
- USD/JPYã€EUR/JPYã‚’åŒæ™‚å–å¾—
- å„é€šè²¨ãƒšã‚¢ã®æŒ‡æ¨™æ¯”è¼ƒ

**TEST 3: ã‚·ã‚°ãƒŠãƒ«è§£é‡ˆ**
- ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ã‹ã‚‰ãƒˆãƒ¬ãƒ¼ãƒ‰æŽ¨å¥¨ã‚’ç”Ÿæˆ
- è²·ã„/å£²ã‚Š/æ§˜å­è¦‹ã®åˆ¤å®š

---

## ãƒ†ã‚¹ãƒˆçµæžœ

### å®Ÿè¡Œã‚³ãƒžãƒ³ãƒ‰

```bash
cd backend
source venv/bin/activate
python examples/test_technical_analyzer.py
```

### ãƒ†ã‚¹ãƒˆçµæžœã‚µãƒžãƒªãƒ¼

```
çµæžœ: 3/3 ãƒ†ã‚¹ãƒˆæˆåŠŸ
âœ… PASSED: TEST 1: å˜ä¸€é€šè²¨ãƒšã‚¢
âœ… PASSED: TEST 2: è¤‡æ•°é€šè²¨ãƒšã‚¢
âœ… PASSED: TEST 3: ã‚·ã‚°ãƒŠãƒ«è§£é‡ˆ
```

---

## å–å¾—ã—ãŸãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™

### USD/JPYï¼ˆ2026-01-12ï¼‰

```
ðŸ“Š åŸºæœ¬æƒ…å ±:
  ãƒ‡ãƒ¼ã‚¿æ•°: 108 æœ¬ï¼ˆ7æ—¥åˆ†ã®1æ™‚é–“è¶³ï¼‰
  æœ€æ–°ä¾¡æ ¼: 157.804

ðŸ“ˆ ç§»å‹•å¹³å‡ï¼ˆMAï¼‰:
  MA20: 157.933
  MA50: 157.428
  MA20 > MA50: Trueï¼ˆä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰

ðŸ“‰ RSI:
  RSI(14): 46.84
  è²·ã‚ã‚Œã™ãŽ: False
  å£²ã‚‰ã‚Œã™ãŽ: False
  â†’ ä¸­ç«‹

ðŸ”„ MACD:
  MACD: 0.1205
  Signal: 0.1764
  Histogram: -0.0559
  å¼·æ°—ã‚¯ãƒ­ã‚¹ã‚ªãƒ¼ãƒãƒ¼: False
  å¼±æ°—ã‚¯ãƒ­ã‚¹ã‚ªãƒ¼ãƒãƒ¼: False
  â†’ ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ãƒžã‚¤ãƒŠã‚¹ï¼ˆä¸‹é™åœ§åŠ›ï¼‰

ðŸŽ¯ ç·åˆåˆ¤å®š:
  ãƒˆãƒ¬ãƒ³ãƒ‰: UPï¼ˆä¸Šæ˜‡ï¼‰
  ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ : NEUTRALï¼ˆä¸­ç«‹ï¼‰
  æŽ¨å¥¨: ðŸŸ¡ æ§˜å­è¦‹
```

### EUR/JPYï¼ˆ2026-01-12ï¼‰

```
ðŸ“Š åŸºæœ¬æƒ…å ±:
  æœ€æ–°ä¾¡æ ¼: 184.474

ðŸ“ˆ ç§»å‹•å¹³å‡:
  ãƒˆãƒ¬ãƒ³ãƒ‰: UPï¼ˆä¸Šæ˜‡ï¼‰

ðŸ“‰ RSI:
  RSI(14): 83.24
  è²·ã‚ã‚Œã™ãŽ: True âš ï¸
  â†’ å£²ã‚Šã‚·ã‚°ãƒŠãƒ«ï¼ˆèª¿æ•´ã®å¯èƒ½æ€§ï¼‰

ðŸŽ¯ ç·åˆåˆ¤å®š:
  ãƒˆãƒ¬ãƒ³ãƒ‰: UP
  ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ : NEUTRAL
  æŽ¨å¥¨: âš ï¸ æ³¨æ„ï¼ˆè²·ã‚ã‚Œã™ãŽï¼‰
```

---

## åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯

### ãƒˆãƒ¬ãƒ³ãƒ‰åˆ¤å®š

```python
if ma20 > ma50:
    trend = "up"    # ä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰
else:
    trend = "down"  # ä¸‹é™ãƒˆãƒ¬ãƒ³ãƒ‰
```

### ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ åˆ¤å®š

```python
# å¼·æ°—ã‚·ã‚°ãƒŠãƒ«
if macd_bullish_crossover or (rsi_oversold and macd_histogram > 0):
    momentum = "bullish"

# å¼±æ°—ã‚·ã‚°ãƒŠãƒ«
elif macd_bearish_crossover or (rsi_overbought and macd_histogram < 0):
    momentum = "bearish"

# ä¸­ç«‹
else:
    momentum = "neutral"
```

### ãƒˆãƒ¬ãƒ¼ãƒ‰æŽ¨å¥¨

```python
if trend == "up" and momentum == "bullish":
    recommendation = "BUY"   # ðŸŸ¢ è²·ã„ï¼ˆå¼·æ°—ï¼‰

elif trend == "down" and momentum == "bearish":
    recommendation = "SELL"  # ðŸ”´ å£²ã‚Šï¼ˆå¼±æ°—ï¼‰

else:
    recommendation = "HOLD"  # ðŸŸ¡ æ§˜å­è¦‹ï¼ˆä¸­ç«‹ï¼‰
```

---

## å®Ÿè£…ã®ç‰¹å¾´

### 1. ã‚·ãƒ³ãƒ—ãƒ«ãªAPI

```python
# ãŸã£ãŸ3è¡Œã§ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™å–å¾—
analyzer = TechnicalAnalyzer()
indicators = analyzer.get_indicators("USD_JPY", "1hour", days=7)
print(f"ãƒˆãƒ¬ãƒ³ãƒ‰: {indicators['trend']}")
```

### 2. å …ç‰¢ãªè¨ˆç®—

- ãƒ‡ãƒ¼ã‚¿ä¸è¶³ãƒã‚§ãƒƒã‚¯ï¼ˆæœ€ä½Ž50æœ¬å¿…è¦ï¼‰
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- åž‹å¤‰æ›ã®å®‰å…¨æ€§

### 3. è¤‡æ•°é€šè²¨ãƒšã‚¢å¯¾å¿œ

```python
# è¤‡æ•°é€šè²¨ãƒšã‚¢ã‚’ä¸€æ‹¬å–å¾—
symbols = ["USD_JPY", "EUR_JPY"]
indicators_dict = analyzer.get_multiple_indicators(symbols)
```

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### Phase 3 æ®‹ã‚¿ã‚¹ã‚¯

1. âœ… **GMOã‚³ã‚¤ãƒ³ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆ**ï¼ˆå®Œäº†ï¼‰
2. âœ… **ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨ˆç®—**ï¼ˆå®Œäº†ï¼‰
3. ðŸ”œ **ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè£…**
   - ãƒ‹ãƒ¥ãƒ¼ã‚¹åˆ†æžçµæžœã®å–å¾—
   - ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ã¨ã®çµ±åˆ
   - ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆ
   - Firestoreã¸ã®ä¿å­˜

4. ðŸ”œ **ã‚·ã‚°ãƒŠãƒ«ä¿å­˜æ©Ÿèƒ½**
   - Firestoreã‚¹ã‚­ãƒ¼ãƒžè¨­è¨ˆ
   - ã‚·ã‚°ãƒŠãƒ«ä¿å­˜å‡¦ç†

---

## æŠ€è¡“çš„ãªæ±ºå®šäº‹é …

### ä½¿ç”¨ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

**æŽ¡ç”¨:**
- pandasï¼ˆDataFrameã§ã®è¨ˆç®—ï¼‰
- numpyï¼ˆæ•°å€¤è¨ˆç®—ï¼‰

**ä¸æŽ¡ç”¨:**
- pandas-taï¼ˆPython 3.12ä»¥ä¸ŠãŒå¿…è¦ï¼‰

### ãƒ‡ãƒ¼ã‚¿è¦ä»¶

**æœ€ä½Žãƒ‡ãƒ¼ã‚¿æ•°:**
- 50æœ¬ä»¥ä¸Šï¼ˆMA50è¨ˆç®—ã®ãŸã‚ï¼‰
- æŽ¨å¥¨: 100æœ¬ä»¥ä¸Šï¼ˆ7æ—¥åˆ†ã®1æ™‚é–“è¶³ï¼‰

### è¨ˆç®—ç²¾åº¦

- å°æ•°ç‚¹ä»¥ä¸‹ã®ä¸¸ã‚å‡¦ç†
  - MA: 3æ¡
  - RSI: 2æ¡
  - MACD: 4æ¡

---

## ã¾ã¨ã‚

ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™è¨ˆç®—æ©Ÿèƒ½ã®å®Ÿè£…ãŒå®Œäº†ã—ã¾ã—ãŸã€‚

**âœ… é”æˆäº‹é …:**
1. MAã€RSIã€MACD ã®è¨ˆç®—æ©Ÿèƒ½å®Ÿè£…
2. ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ»ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
3. è¤‡æ•°é€šè²¨ãƒšã‚¢å¯¾å¿œ
4. ãƒ†ã‚¹ãƒˆå®Ÿè¡ŒæˆåŠŸï¼ˆ3/3ï¼‰
5. è‡ªå‰å®Ÿè£…ã«ã‚ˆã‚‹Python 3.10å¯¾å¿œ

**ðŸ“Š è¨ˆç®—å¯èƒ½ãªæŒ‡æ¨™:**
- MAï¼ˆç§»å‹•å¹³å‡ï¼‰: MA20, MA50
- RSIï¼ˆç›¸å¯¾åŠ›æŒ‡æ•°ï¼‰: RSI(14)
- MACD: MACDç·šã€ã‚·ã‚°ãƒŠãƒ«ç·šã€ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ 

**ðŸŽ¯ åˆ¤å®šæ©Ÿèƒ½:**
- ãƒˆãƒ¬ãƒ³ãƒ‰åˆ¤å®šï¼ˆup/downï¼‰
- ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ åˆ¤å®šï¼ˆbullish/bearish/neutralï¼‰
- ãƒˆãƒ¬ãƒ¼ãƒ‰æŽ¨å¥¨ï¼ˆè²·ã„/å£²ã‚Š/æ§˜å­è¦‹ï¼‰

**ðŸ”œ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:**
- ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè£…ï¼ˆãƒ‹ãƒ¥ãƒ¼ã‚¹ + ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ã®çµ±åˆï¼‰
- ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆ
- Firestoreã¸ã®ä¿å­˜

---

**ä½œæˆè€…**: Claude Sonnet 4.5
**æœ€çµ‚æ›´æ–°**: 2026-01-12
